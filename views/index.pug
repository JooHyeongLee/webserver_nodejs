doctype html
head
	meta(charset-='UTF-8')
	meta(name='viewport', content='width = device-width', initial-scale='1')
	title CodingTogether
	link(rel='stylesheet', href='css/bootstrap.css')
	link(rel='stylesheet', href='custom_css/index.css')
	script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js')
body
#navbar
.container
	.jumbotron(style='background:transparent;')
		.clock
			h1.text-center(style="color:white;") 
		p.text-center
			a.btn.btn-primary.btn-lg(href='practice', role='button') Let's go
.row
#footer
	.container
		.row
			.col-sm-4(style='text-align:left;')
				h4 Copyright &copy; 2018 bubobubo 
				h5 이주형 
script.
	const imgNum = !{imgNum}	//이미지 개수
	const body = document.querySelector("body")
	let currImg=1
	const clockContainer = document.querySelector(".clock"),
	clock = clockContainer.querySelector('h1')
	$(document).ready(function(){
		$('#navbar').load('http://localhost:3000/header')
	});
	function paintImage() {
		const file = genNum();
		const image = new Image();
		image.src = "../images/"+file+".jpg"
		image.classList.add('bgImage')
		body.appendChild(image)
	}
	function genNum() {
		currImg >= imgNum-2 ? currImg=1 : currImg++;
		return currImg 
	}
	function getTime(){
		const date = new Date();
		const hours = date.getHours();
		const minutes = date.getMinutes();
		const seconds = date.getSeconds();
		clock.innerHTML = (hours<10 ? "0"+hours : hours)+':'+(minutes<10 ? "0"+minutes : minutes)+':'+(seconds<10 ? "0"+seconds : seconds)
	}
	function handleGeoSuccess(position){
		const latitude = position.coords.latitude;
		const longitude = position.coords.longitude;
		const coordsObj = {
			latitude,
			longitude
		};
		localStorage.setItem('coords',JSON.stringify(coordsObj));
	}
	function handleGeoError() {
		console.log('error')
	}
	function askForCoords(){
		navigator.geolocation.getCurrentPosition(handleGeoSuccess,handleGeoError)
	}
	function loadCoords(){
		const loadCoords = localStorage.getItem('coords');
		if(loadCoords===null)
			askForCoords();
		else
			console.log(loadCoords);
	}
	function init() {
		getTime();
		setInterval(getTime,1000)
		paintImage();
		setInterval(paintImage,1000)
		loadCoords();
	}
	init();
